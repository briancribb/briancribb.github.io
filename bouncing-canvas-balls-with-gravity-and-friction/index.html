<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <title>The Mighty Cribb - Bouncing Canvas Balls with Gravity and Friction</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css">
    <link rel="stylesheet" href="/assets/css/styles.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="A fan-made timeline using content from the FASA Star Trek RPG">
    <meta name="author" content="Brian Cribb">
    <link rel="icon" href="/assets/img/favicon.ico">
  </head>
  <body class="position-relative">
    <div class="skippy visually-hidden-focusable overflow-hidden">
      <div class="container">
        <a class="d-inline-flex p-2 m-1" href="#main-content">Skip to main content</a>
      </div>
    </div>
    <div id="content" class="content mb-0">
      <header class="main-header sticky-top">
  <nav class="navbar-wrap bg-primary">
    <div class="container-fluid">
      <nav class="navbar navbar-expand-sm navbar-dark">
        <a class="navbar-brand" href="/">The Mighty Cribb</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-nav me-auto">
          
            
              <li class="nav-item">
                <a class="nav-link" href="/webdev/">
                  Webdev
                </a>
              </li>
            
          
            
              <li class="nav-item">
                <a class="nav-link" href="/races/">
                  Races
                </a>
              </li>
            
          
            
              <li class="nav-item">
                <a class="nav-link" href="/blog/">
                  Blog
                </a>
              </li>
            
          
            
              <li class="nav-item">
                <a class="nav-link" href="/contact/">
                  Contact
                </a>
              </li>
            
          
        </ul>
        <div class="d-flex navbar-search-form ps-sm-3">
          <div class="input-group">
            <input disabled id="tmc-search-input" type="text" class="form-control tmc-search" placeholder="Search..." aria-label="Search input" aria-describedby="btnGroupAddon">
            <div class="input-group-append">
              <button disabled id="tmc-search-button" class="tmc-search btn btn-outline-light my-sm-0 btn-top-search" type="button"><i class="fas fa-search"></i></button>
            </div>
          </div>
        </div>
        </div>
      </nav>
    </div>
  </nav>
</header>


      <main id="main-content" role="main">
        <div class="container py-3">
	<h1>Bouncing Canvas Balls with Gravity and Friction</h1>


	<div class="d-sm-flex">

		<small class="d-block flex-sm-grow-1 mb-3">
			<time class="d-block text-muted" datetime="">October 10, 2012</time>

			

			

		</small>

		




  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  
    
    
    
    
    


<div class="flex-sm-shrink-0">
  <div class="btn-group btn-group mb-3">
    
      <a title="Animating a Solar System with the HTML5 Canvas" class="btn btn-primary text-white border border-white" rel="prev" href="/animating-solar-system-html5-canvas/">
        <i class="fas fa-chevron-left"></i>
        <span class="d-md-none">Previous</span>
      </a>
    

    
      <a title="Showing the Frame Rate on Canvas Animations" class="btn btn-primary text-white border border-white" rel="next" href="/showing-the-frame-rate-on-canvas-animations/">
        <span class="d-md-none">Next</span>
        <i class="fas fa-chevron-right"></i>
      </a>
    
  </div>
</div>






	</div>
	<div class="codepen" data-height="870" data-theme-id="dark" data-default-tab="result" data-user="briancribb" data-slug-hash="dwjQKy" style="height: 866px; box-sizing: border-box; display: flex; align-items: center; justify-content: center; border: 2px solid; margin: 1em 0; padding: 1em;" data-pen-title="Canvas Bouncing Balls with Gravity and Friction">
  <span>See the Pen <a href="https://codepen.io/briancribb/pen/dwjQKy">
  Canvas Bouncing Balls with Gravity and Friction</a> by Brian Cribb (<a href="https://codepen.io/briancribb">@briancribb</a>)
  on <a href="https://codepen.io">CodePen</a>.</span>
</div>

<p>I went a little crazy with this one. I know it doesn’t look like much, but there’s a lot going on inside that canvas thingy. If you click on the button or on the canvas, a bunch of black circles will bounce around with their own vectors, speeds, elasticity, and with a shared bit of gravity. <em>(Eventually they’ll stop.)</em> If you want to change somethings, just put numbers into the input boxes. If there’s nothing, then default values will be used. If you enter a letter instead of a number, you’ll get an error.</p>

<h3 id="what-was-i-trying-to-do">What was I trying to do?</h3>

<p>The idea was to play around with some physics and have a go at some form validation, while using all the wonderful fanciness of <a href="http://paulirish.com/2011/requestanimationframe-for-smart-animating/">requestAnimationFrame</a>. I also wanted to use a prototype class instead of just regular objects. It turned out well, but I did catch a bad case of Shiny Object Syndrome before the end.</p>

<p>Javascript classes aren’t quite the same as Flash classes, but they’re pretty close. You can have public variables, private variables, methods… all the good stuff. It’s supposed to keep your code tidy, but I have to admit that I started going crazy with the methods I was building.</p>

<p>How much friction should the floor have? How bouncy should these things be? What kind of gravity should I use? It’s pretty easy to get excited and build bunches of things you won’t actually use. It lost a big chunk of free time just watching things bounce. Sad, really.</p>

<h3 id="input-fields-and-type-coercion">Input Fields and Type Coercion</h3>

<p>Javascript lets you play fast and loose with variable types, so I wanted to play with that a bit as well. If the user is going to enter values, how do I prevent them from putting letters instead of numbers? Will the input see the “1” as a string or a number? What to do? I wanted to run some tests but I didn’t really need an actual form, so I just tossed some inputs into a styled div tag and targeted them with JavaScript.</p>

<p>For validation, I wound up using the minus-zero trick to kind of force the input into a number. If this checks out, we’re okay. If it blows up and yields <code class="highlighter-rouge">NaN</code> <em>(not a number)</em> then we need to toss out an alert and refuse to bounce.</p>

<p>Finally, I decided to make the canvas itself a button. It might help with mobile devices, just in case the submit button winds up below the fold. <em>(You shouldn’t have to hit the button and then scroll up quickly in order to see the action.)</em></p>


	
	

	<div class="btn-group btn-group mb-3 d-flex">
		
		<a title="Animating a Solar System with the HTML5 Canvas" class="btn btn-primary text-white border border-white w-50" rel="prev" href="/animating-solar-system-html5-canvas/">
			<div class="d-flex">
				<div class="align-self-center">
					<i class="fas fa-chevron-left me-2 d-md-none"></i>
					<i class="fas fa-chevron-left me-2 d-none d-md-inline fa-2x"></i>
				</div>
				<div class="align-self-center flex-grow-1">
					<span class="d-none d-md-inline">Animating a Solar System with the HTML5 Canvas</span>
					<span class="d-md-none">Previous</span>
				</div>
			</div>
		</a>
		

		
		<a title="Showing the Frame Rate on Canvas Animations" class="btn btn-primary text-white border border-white w-50" rel="next" href="/showing-the-frame-rate-on-canvas-animations/">
			<div class="d-flex justify-content-end">
				<div class="align-self-center flex-grow-1">
					<span class="d-none d-md-inline">Showing the Frame Rate on Canvas Animations</span>
					<span class="d-md-none">Next</span>
				</div>
				<div class="align-self-center">
					<i class="fas fa-chevron-right ms-2 d-md-none"></i>
					<i class="fas fa-chevron-right ms-2 d-none d-md-inline fa-2x"></i>
				</div>
			</div>
		</a>
		
	</div>
	
		
<div id="disqus_thread"></div>
<script>
    /**
     *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
     *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables
     */
    /*
    var disqus_config = function () {
        this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
        this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
    };
    */
    (function() {  // DON'T EDIT BELOW THIS LINE
        var d = document, s = d.createElement('script');
        
        s.src = 'https://themightycribb.disqus.com/embed.js';
        
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>









	
</div>













      </main>
    </div>
    <footer id="main-footer" class="main-footer py-3 bg-primary text-white">
      <div class="container">
        <p class="mb-0"><small><em>&copy; Brian Cribb 2020</em></small></p>
      </div>
    </footer>
    <script async src="//embedr.flickr.com/assets/client-code.js" charset="utf-8"></script>
    <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.min.js" integrity="sha384-w1Q4orYjBQndcko6MimVbzY0tgp4pWB4lZ7lr30WKz0vr/aWKhXdBNmNb5D92v7s" crossorigin="anonymous"></script>
    <script src="https://unpkg.com/react@17/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@17/umd/react-dom.development.js" crossorigin></script>
    <script type="text/javascript" src="/assets/js/scripts.js" charset="utf-8"></script>
    <script async src="https://cpwebassets.codepen.io/assets/embed/ei.js" ></script>
  </body>
</html>