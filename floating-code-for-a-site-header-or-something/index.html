<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Floating Code for a Site Header or Something</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css">
    <link rel="stylesheet" href="/assets/css/styles.css">
    <meta name="description" content="A fan-made timeline using content from the FASA Star Trek RPG">
    <meta name="author" content="Brian Cribb">
    <link rel="icon" href="/assets/img/favicon.ico">
  </head>
  <body class="position-relative">
    <div class="skippy visually-hidden-focusable overflow-hidden">
      <div class="container">
        <a class="d-inline-flex p-2 m-1" href="#main-content">Skip to main content</a>
      </div>
    </div>
    <div id="content" class="content mb-0">
      <header class="main-header sticky-top">
  <nav class="navbar-wrap bg-primary">
    <div class="container-fluid">
      <nav class="navbar navbar-expand-sm navbar-dark">
        <a class="navbar-brand" href="/">The Mighty Cribb</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-nav me-auto">
          
            
              <li class="nav-item">
                <a class="nav-link" href="/webdev/">
                  Webdev
                </a>
              </li>
            
          
            
              <li class="nav-item">
                <a class="nav-link" href="/races/">
                  Races
                </a>
              </li>
            
          
            
              <li class="nav-item">
                <a class="nav-link" href="/blog/">
                  Blog
                </a>
              </li>
            
          
            
              <li class="nav-item">
                <a class="nav-link" href="/contact/">
                  Contact
                </a>
              </li>
            
          
        </ul>
        <div class="d-flex navbar-search-form ps-sm-3">
          <div class="input-group">
            <input disabled id="tmc-search-input" type="text" class="form-control tmc-search" placeholder="Search..." aria-label="Search input" aria-describedby="btnGroupAddon">
            <div class="input-group-append">
              <button disabled id="tmc-search-button" class="tmc-search btn btn-outline-light my-sm-0 btn-top-search" type="button"><i class="fas fa-search"></i></button>
            </div>
          </div>
        </div>
        </div>
      </nav>
    </div>
  </nav>
</header>


      <main id="main-content" role="main">
        <div class="container py-3">
	<h1>Floating Code for a Site Header or Something</h1>


	<div class="d-sm-flex">

		<small class="d-block flex-sm-grow-1 mb-3">
			<time class="d-block text-muted" datetime="">March 11, 2013</time>

			

			

		</small>

		




  

  

  

  

  

  

  

  

  

  

  

  

  

  

  
    
    
    
    
    


<div class="flex-sm-shrink-0">
  <div class="btn-group btn-group mb-3">
    
      <a title="Showing the Frame Rate on Canvas Animations" class="btn btn-primary text-white border border-white" rel="prev" href="/showing-the-frame-rate-on-canvas-animations/">
        <i class="fas fa-chevron-left"></i>
        <span class="d-md-none">Previous</span>
      </a>
    

    
      <a title="CreateJS helps Flash Developers Move to Canvas" class="btn btn-primary text-white border border-white" rel="next" href="/createjs-helps-flash-developers-move-to-canvas/">
        <span class="d-md-none">Next</span>
        <i class="fas fa-chevron-right"></i>
      </a>
    
  </div>
</div>






	</div>
	<div class="codepen" data-height="203" data-theme-id="dark" data-default-tab="result" data-user="briancribb" data-slug-hash="XoPjGm" style="height: 213px; box-sizing: border-box; display: flex; align-items: center; justify-content: center; border: 2px solid; margin: 1em 0; padding: 1em;" data-pen-title="Canvas Floating Text">
  <span>See the Pen <a href="https://codepen.io/briancribb/pen/XoPjGm">
  Canvas Floating Text</a> by Brian Cribb (<a href="https://codepen.io/briancribb">@briancribb</a>)
  on <a href="https://codepen.io">CodePen</a>.</span>
</div>

<p><em>Edit: The Codepen embed above was on a static page on this site, before abandoning it to a folder on my computer. I’ve tossed it into a pen to preserve it and updated this post a little. Modernizr is no longer used in the example.</em></p>

<p>Above you’ll see some code floating around in a banner. It’s something I tossed together over a weekend to use as a banner for this site. The general idea was to duplicate the first animation exercise I ever did, which was to make a square move across the screen and wrap at the end.</p>

<p>Pretty basic, but what if I did it with text? And what if I  used the new HTML 5 canvas to do it? Just in case you’re looking at this post after I’ve moved on to something else in the header.</p>

<p>Looking back, it might have been just as easy to move text boxes in the DOM, and it was a good opportunity to try out CSS3 animation… but I haven’t done any canvas stuff in a while and I sort of wanted to play with the text. Besides, there were a few things I wanted to play with. Like measuring the width of a string on the canvas and basing a position upon that information.</p>

<p>The canvas is a bit tricky with telling you the width of a block of text, and it won’t tell you the height, so I’m interested to check this out from other computers and other browsers. <em>Courier New</em> on my machine is not necessarily the same as <em>Courier New</em> on your machine… so will the measurements be off from computer to computer? Probably. But maybe I can adjust for it.</p>

<p>On the whole, it’s pretty simple. The script checks with Modernizr for canvas support, and starts off if things are okay. Then it uses jQuery to see if the parent of the canvas is visible. If so, it draws the canvas. This doesn’t matter much on the test page, but on this site the header gets hidden if the window is too small for it.</p>

<p>Although I wanted to keep requesting animation frames in case the window got bigger again, I didn’t want to draw things that the user couldn’t see. So it just sits and quietly counts until it’s parent (the main header) is visible again before updating and drawing anything.</p>

<p>For those without canvas support, there is no content inside the canvas. It should just sit there empty and transparent if you’re using some goofy browser without modern features. And if Modernizr puts the <em>no-canvas</em> class on the <code class="highlighter-rouge">html</code> tag, then they get a nice jpg background. For modern browsers, the CSS gives you a white background and renders the canvas. To make the whole thing fit, it’s absolutely positioned and the parent is set to <em>overflow:hidden</em>. This allows it to keep moving without busting out of the layout.</p>

<p>Lastly, there’s the super-nifty method I used to programmatically add and arrange the text… um… yeah, about that…</p>

<p>I just eyeballed it. I did base some measurements on the text width, but in the end I just created an object with the text values I wanted, put them into animation objects and added them to an array to be updated. It’s not what I would do for a big company, but it works for little bells and whistles like this.</p>


	
	

	<div class="btn-group btn-group mb-3 d-flex">
		
		<a title="Showing the Frame Rate on Canvas Animations" class="btn btn-primary text-white border border-white w-50" rel="prev" href="/showing-the-frame-rate-on-canvas-animations/">
			<div class="d-flex">
				<div class="align-self-center">
					<i class="fas fa-chevron-left me-2 d-md-none"></i>
					<i class="fas fa-chevron-left me-2 d-none d-md-inline fa-2x"></i>
				</div>
				<div class="align-self-center flex-grow-1">
					<span class="d-none d-md-inline">Showing the Frame Rate on Canvas Animations</span>
					<span class="d-md-none">Previous</span>
				</div>
			</div>
		</a>
		

		
		<a title="CreateJS helps Flash Developers Move to Canvas" class="btn btn-primary text-white border border-white w-50" rel="next" href="/createjs-helps-flash-developers-move-to-canvas/">
			<div class="d-flex justify-content-end">
				<div class="align-self-center flex-grow-1">
					<span class="d-none d-md-inline">CreateJS helps Flash Developers Move to Canvas</span>
					<span class="d-md-none">Next</span>
				</div>
				<div class="align-self-center">
					<i class="fas fa-chevron-right ms-2 d-md-none"></i>
					<i class="fas fa-chevron-right ms-2 d-none d-md-inline fa-2x"></i>
				</div>
			</div>
		</a>
		
	</div>
</div>













      </main>
    </div>
    <footer id="main-footer" class="main-footer py-3 bg-primary text-white">
      <div class="container">
        <p class="mb-0"><small><em>&copy; Brian Cribb 2020</em></small></p>
      </div>
    </footer>
    <script async src="//embedr.flickr.com/assets/client-code.js" charset="utf-8"></script>
    <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.min.js" integrity="sha384-w1Q4orYjBQndcko6MimVbzY0tgp4pWB4lZ7lr30WKz0vr/aWKhXdBNmNb5D92v7s" crossorigin="anonymous"></script>
    <script src="https://unpkg.com/react@17/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@17/umd/react-dom.development.js" crossorigin></script>
    <script type="text/javascript" src="/assets/js/scripts.js" charset="utf-8"></script>
    <script async src="https://cpwebassets.codepen.io/assets/embed/ei.js" ></script>
  </body>
</html>